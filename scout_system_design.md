# スカウトシステム設計ドキュメント

## 概要
高校野球のスカウトシステムを設計します。スカウトは様々なアクションを通じて選手情報を収集し、球団にレポートを提出する役割を担います。スカウトの能力（スキル）はアクションの成功率や情報の質に影響します。

## 1. スカウトスキルセット（8項目）

### 1.1 スキルの基本定義

| スキル | 定義 / 使われ方 | 主な関連行動 | 効果 |
|--------|----------------|--------------|------|
| **探索 (Exploration)** | 隠れた才能・注目選手の発見 | PRAC_WATCH, INFO_SWAP | 隠れた才能の発掘、注目選手の早期発見 |
| **観察 (Observation)** | 実パフォ計測精度 | GAME_WATCH, SCRIMMAGE | 試合中の細かい動きを見抜く、正確な能力値評価 |
| **分析 (Analysis)** | データ統合と将来予測 | VIDEO_ANALYZE, REPORT_WRITE | 統計・技術的評価、将来性の予測 |
| **洞察 (Insight)** | 潜在才能・怪我リスク察知 | VIDEO_ANALYZE, INFO_SWAP | 選手の内面・将来性を見る、リスク評価 |
| **コミュニケーション (Communication)** | 面談・信頼構築 | INTERVIEW, INFO_SWAP | 選手・関係者との対話、信頼関係の構築 |
| **交渉 (Negotiation)** | 利害調整・提案採用率 | TEAM_VISIT, REPORT_WRITE | 球団との調整・提案、レポートの質向上 |
| **体力 (Stamina)** | 遠征疲労耐性 | 全アクション | 行動回数・効率に影響、疲労軽減 |
| **直観 (Intuition)** | 一瞬の判断・予感 | 全アクション（補助） | 予期しない発見・危機回避、ボーナス効果 |

### 1.2 スキルの詳細役割定義

#### 探索 (Exploration)
- **主な役割**: 隠れた才能を持つ選手を発見する能力
- **具体的な能力**: 
  - 練習中に目立たない選手の中から才能を見抜く
  - 他のスカウトが注目していない選手を発見
  - 地域の隠れた名門校や強豪校の選手を発掘
- **判定対象**: 才能ランク、ポテンシャルの初期発見

#### 観察 (Observation)
- **主な役割**: 選手の現在の能力値を正確に評価する能力
- **具体的な能力**:
  - 試合中の細かい動きや技術を正確に観察
  - 投球フォーム、打撃フォームの技術的評価
  - 実戦での能力値の正確な測定
- **判定対象**: 現在の能力値（投手能力、野手能力）

#### 分析 (Analysis)
- **主な役割**: データを統合して将来性を予測する能力
- **具体的な能力**:
  - 過去のデータと現在の能力を比較分析
  - 成長パターンの統計的分析
  - 将来の能力値到達予測
- **判定対象**: 成長スピード、成長タイプ、将来の能力値予測

#### 洞察 (Insight)
- **主な役割**: 選手の内面や潜在的な要素を見抜く能力
- **具体的な能力**:
  - 選手の性格や精神面を理解
  - 怪我のリスクや体調の変化を察知
  - 選手の将来性や可能性を直感的に判断
- **判定対象**: 精神力、性格、怪我リスク、ポジション適性

#### コミュニケーション (Communication)
- **主な役割**: 選手や関係者との対話を通じて情報を引き出す能力
- **具体的な能力**:
  - 選手の本音や動機を引き出す
  - 信頼関係を構築して詳細な情報を得る
  - 選手の性格や人間性を理解する
- **判定対象**: 性格、動機、将来の目標、人間関係

#### 交渉 (Negotiation)
- **主な役割**: 球団や関係者との調整・提案能力
- **具体的な能力**:
  - 球団のニーズを正確に把握
  - レポートの質を向上させる
  - 球団からの評価を高める
- **判定対象**: 球団評価、レポート品質、信頼度

#### 体力 (Stamina)
- **主な役割**: スカウト活動の継続性と効率性
- **具体的な能力**:
  - 長時間の観戦や遠征に耐える
  - 疲労による情報収集精度の低下を防ぐ
  - 行動回数の制限を緩和する
- **判定対象**: 行動効率、疲労軽減、情報収集の継続性

#### 直観 (Intuition)
- **主な役割**: 一瞬の判断や予期しない発見
- **具体的な能力**:
  - 予期しない才能の発見
  - 危険な状況の回避
  - 特別な情報の取得
- **判定対象**: 全要素の補助判定、特殊イベント発生

### 1.3 選手情報とスキルの関連性

| 選手情報 | プライマリスキル | サブスキル | 判定精度の計算式 |
|----------|------------------|------------|------------------|
| **現在の能力値** | 観察 (Observation) | 分析 (Analysis) | 観察×0.7 + 分析×0.3 |
| **成長スピード** | 分析 (Analysis) | 観察 (Observation) | 分析×0.6 + 観察×0.4 |
| **成長タイプ** | 分析 (Analysis) | 洞察 (Insight) | 分析×0.5 + 洞察×0.5 |
| **ポテンシャル** | 洞察 (Insight) | 分析 (Analysis) | 洞察×0.6 + 分析×0.4 |
| **才能ランク** | 探索 (Exploration) | 洞察 (Insight) | 探索×0.5 + 洞察×0.5 |
| **性格** | コミュニケーション (Communication) | 洞察 (Insight) | コミュニケーション×0.7 + 洞察×0.3 |
| **精神力** | 洞察 (Insight) | コミュニケーション (Communication) | 洞察×0.6 + コミュニケーション×0.4 |
| **ポジション適性** | 観察 (Observation) | 洞察 (Insight) | 観察×0.6 + 洞察×0.4 |
| **怪我リスク** | 洞察 (Insight) | 観察 (Observation) | 洞察×0.7 + 観察×0.3 |
| **動機・目標** | コミュニケーション (Communication) | 洞察 (Insight) | コミュニケーション×0.8 + 洞察×0.2 |

### 1.4 情報判別精度の計算（レベル1-10システム）

#### 基本計算式
```
基本精度 = (プライマリスキル値 × プライマリ係数 + サブスキル値 × サブ係数) × 8
最終精度 = 基本精度 + (直観スキル値 × 0.8)
最終精度 = min(最終精度, 80)  // 最大80%に制限
```

#### レベル1-10での係数設定例
- **プライマリ係数**: 0.7（70%の重み）
- **サブ係数**: 0.3（30%の重み）

#### 計算例：成長タイプの把握
```
分析スキル: 8（プライマリ）
洞察スキル: 6（サブ）
直観スキル: 4

基本精度 = (8 × 0.7 + 6 × 0.3) × 8 = (5.6 + 1.8) × 8 = 7.4 × 8 = 59.2%
最終精度 = 59.2 + (4 × 0.8) = 59.2 + 3.2 = 62.4%
```

#### 精度レベル
- **0-30%**: 非常に不正確（誤差が大きい）
- **31-50%**: 不正確（概算レベル）
- **51-70%**: やや正確（実用レベル）
- **71-80%**: 正確（信頼できる）
- **80%**: 最大精度（人間の限界）

#### スキルレベル別の期待精度
| スキルレベル | プライマリ単体 | プライマリ+サブ | プライマリ+サブ+直観 |
|-------------|---------------|----------------|-------------------|
| レベル1 | 5.6% | 8% | 8.8% |
| レベル3 | 16.8% | 24% | 26.4% |
| レベル5 | 28% | 40% | 44% |
| レベル7 | 39.2% | 56% | 61.6% |
| レベル10 | 56% | 80% | 80%（上限） |

#### アクション成功判定の具体例
**例：成長タイプの把握（VIDEO_ANALYZE）**
```
分析スキル: 8（プライマリ）
洞察スキル: 6（サブ）
直観スキル: 4

基本成功率 = 70% + (8 × 3%) = 70% + 24% = 94%
最終成功率 = 94% + (4 × 0.8%) = 94% + 3.2% = 97.2%
```

**例：性格の把握（INTERVIEW）**
```
コミュニケーションスキル: 7（プライマリ）
洞察スキル: 5（サブ）
直観スキル: 3

基本成功率 = 65% + (7 × 4%) = 65% + 28% = 93%
最終成功率 = 93% + (3 × 0.8%) = 93% + 2.4% = 95.4%
```

### スキル値の範囲
- **初期値**: 1-5（スカウトの経験レベルに応じて）
- **最大値**: 10
- **成長**: アクション実行時に経験値を獲得

## 2. アクション定義

### 基本アクション

| ID | 行動 | AP | ¥ | 前提 | 取得可能情報 | 成功判定 | 直観効果 |
|----|------|----|----|----|----|----|----|
| PRAC_WATCH | 練習視察 | 2 | 20k | なし | 基本情報、簡易能力値、才能ランク | 60% + 探索×8% | 隠れた才能発見 |
| TEAM_VISIT | 球団訪問 | 1 | 0 | なし | 球団ニーズ、指名候補 | 90% + 交渉×1% | 内部情報の取得 |
| INFO_SWAP | 情報交換 | 1 | 0 | なし | 他地域評価、噂話 | 70% + 洞察×2% | 予期しない情報 |
| NEWS_CHECK | ニュース確認 | 0 | 0 | なし | ニュース情報 | 自動成功 | 特別なニュース発見 |
| GAME_WATCH | 試合観戦 | 3 | 50k | 試合週 | 現在の能力値、ポジション適性 | 55% + 観察×4% | 重要な瞬間を捉える |
| SCRIMMAGE | 練習試合観戦 | 2 | 30k | 試合情報 | 現在の能力値、成長スピード | 50% + 観察×4% | 隠れた実力発見 |
| INTERVIEW | インタビュー | 1 | 10k | 信頼度≥50 | 性格、精神力、動機・目標 | 65% + コミュ×4% | 本音を引き出す |
| VIDEO_ANALYZE | ビデオ分析 | 2 | 0 | 映像あり | 成長タイプ、怪我リスク、ポテンシャル | 70% + 分析×3% | 技術的発見 |
| REPORT_WRITE | レポート作成 | 2 | 0 | 情報量≥3 | 総合評価、将来予測 | 100% (+交渉で質上昇) | 洞察力による質向上 |

### アクション詳細説明

#### PRAC_WATCH（練習視察）
- **目的**: 学校の練習を見学し、選手の基本情報を収集
- **取得情報**: 
  - 基本情報（名前、学校、学年、ポジション）
  - 簡易能力値（主要能力値のみ）
  - 才能ランク（探索スキルによる判定精度）
- **判定スキル**: 探索（プライマリ）、観察（サブ）
- **直観効果**: 隠れた才能を持つ選手を発見する可能性

#### TEAM_VISIT（球団訪問）
- **目的**: 球団関係者と面談し、指名方針を探る
- **取得情報**: 
  - 球団のニーズ
  - 指名候補リスト
  - 球団評価（交渉スキルによる判定精度）
- **判定スキル**: 交渉（プライマリ）、洞察（サブ）
- **直観効果**: 内部情報や非公式な情報を取得

#### INFO_SWAP（情報交換）
- **目的**: 他のスカウトや関係者と情報を交換
- **取得情報**: 
  - 他地域の選手評価
  - 噂話や裏情報
  - 隠れた情報（洞察スキルによる判定精度）
- **判定スキル**: 洞察（プライマリ）、探索（サブ）
- **直観効果**: 予期しない貴重な情報を入手

#### NEWS_CHECK（ニュース確認）
- **目的**: 野球関連のニュースをチェック
- **取得情報**: 
  - 選手の活躍情報
  - 怪我情報
  - 注目選手の情報
- **判定スキル**: 自動成功（直観による補正のみ）
- **直観効果**: 特別なニュースや隠れた情報を発見

#### GAME_WATCH（試合観戦）
- **目的**: 公式試合を観戦し、実戦での能力を評価
- **取得情報**: 
  - 現在の能力値（観察スキルによる判定精度）
  - ポジション適性（観察スキルによる判定精度）
  - 試合での動きや技術
- **判定スキル**: 観察（プライマリ）、分析（サブ）
- **直観効果**: 試合中の重要な瞬間や隠れた能力を発見

#### SCRIMMAGE（練習試合観戦）
- **目的**: 練習試合を観戦し、実戦に近い状況での能力を評価
- **取得情報**: 
  - 現在の能力値（観察スキルによる判定精度）
  - 成長スピード（観察スキルによる判定精度）
  - 実戦傾向
- **判定スキル**: 観察（プライマリ）、分析（サブ）
- **直観効果**: 公式試合では見えない隠れた実力を発見

#### INTERVIEW（インタビュー）
- **目的**: 選手や関係者に直接インタビュー
- **取得情報**: 
  - 性格（コミュニケーションスキルによる判定精度）
  - 精神力（洞察スキルによる判定精度）
  - 動機・目標（コミュニケーションスキルによる判定精度）
- **判定スキル**: コミュニケーション（プライマリ）、洞察（サブ）
- **直観効果**: 選手の本音や隠れた動機を引き出す

#### VIDEO_ANALYZE（ビデオ分析）
- **目的**: 選手の映像を詳細に分析
- **取得情報**: 
  - 成長タイプ（分析スキルによる判定精度）
  - 怪我リスク（洞察スキルによる判定精度）
  - ポテンシャル（洞察スキルによる判定精度）
  - 技術的な分析
- **判定スキル**: 分析（プライマリ）、洞察（サブ）
- **直観効果**: 技術的な問題点や改善点を発見

#### REPORT_WRITE（レポート作成）
- **目的**: 収集した情報をまとめて球団に提出
- **取得情報**: 
  - 総合評価
  - 将来予測
  - レポート品質（交渉スキルによる判定精度）
- **判定スキル**: 交渉（プライマリ）、分析（サブ）
- **直観効果**: 洞察力によるレポートの質向上

## 3. 直観スキルの詳細設計

### 直観の効果システム

#### 基本効果
- **ボーナス効果**: 成功判定後に直観値に応じた追加効果
- **軽減効果**: 失敗判定後に直観値に応じた軽減処理
- **イベント発生**: 直観値が高いほど特殊イベントの発生確率上昇

#### 直観効果の計算式
```
直観ボーナス = 直観スキル値 × 0.1 × ランダム係数(0.5-1.5)
```

#### 特殊イベントの発生確率
```
イベント発生確率 = 直観スキル値 × 0.01 × アクション難易度係数
```

### 直観の制限とバランス
- 直観だけでは詳細な分析はできない
- 他のスキルと組み合わせて初めて真価を発揮
- 直観に頼りすぎるとリスクも伴う
- 高すぎる直観は他のスキルの価値を下げるため、適度な補正値に調整

## 4. スカウトの基本属性

### スカウトクラス
```dart
class Scout {
  // 基本情報
  String name;
  int level;
  int experience;
  
  // スキル値（8項目）
  Map<Skill, int> skills;
  
  // 行動関連
  int actionPoints;      // 現在のAP
  int maxActionPoints;   // 最大AP
  int stamina;           // 体力
  int maxStamina;        // 最大体力
  int money;             // 所持金
  
  // 情報関連
  List<PlayerInfo> discoveredPlayers;  // 発見した選手
  List<NewsItem> collectedNews;        // 収集したニュース
  int trustLevel;                      // 信頼度
  
  // 統計
  int totalActions;      // 総アクション数
  int successfulActions; // 成功アクション数
  double successRate;    // 成功率
}
```

### スキル定義
```dart
enum Skill {
  exploration,    // 探索
  observation,    // 観察
  analysis,       // 分析
  insight,        // 洞察
  communication,  // コミュニケーション
  negotiation,    // 交渉
  stamina,        // 体力
  intuition,      // 直観
}
```

## 5. アクション実行システム

### アクション実行フロー
1. **前提条件チェック**
   - 必要なAP、コスト、前提条件の確認
   - 体力の確認

2. **リソース消費**
   - AP消費
   - コスト支払い
   - 体力消費

3. **成功判定**
   - 基礎成功率 + スキル補正 + 直観補正
   - ランダム要素の適用

4. **結果処理**
   - 成功/失敗に応じた情報取得
   - 直観効果の適用
   - 経験値獲得

5. **後処理**
   - 統計更新
   - スキル成長
   - イベント発生

### 成功判定の詳細
```dart
bool executeAction(Action action, Scout scout) {
  // 前提条件チェック
  if (!checkPrerequisites(action, scout)) return false;
  
  // リソース消費
  consumeResources(action, scout);
  
  // 成功判定
  double successRate = calculateSuccessRate(action, scout);
  bool success = Random().nextDouble() < successRate;
  
  // 結果処理
  processResult(action, scout, success);
  
  // 直観効果適用
  applyIntuitionEffects(action, scout, success);
  
  return success;
}

double calculateSuccessRate(Action action, Scout scout) {
  double baseRate = action.baseSuccessRate;
  double skillBonus = scout.skills[action.primarySkill] * action.skillCoefficient;
  double intuitionBonus = scout.skills[Skill.intuition] * 0.8;
  
  return (baseRate + skillBonus + intuitionBonus).clamp(0.0, 1.0);
}
```

## 6. 情報管理システム

### 選手情報の詳細度
1. **基本情報**: 名前、学校、学年、ポジション
2. **簡易能力**: 主要能力値のみ（観察スキルによる判定精度）
3. **詳細能力**: 全能力値、隠し能力値（観察+分析スキルによる判定精度）
4. **完全情報**: ポテンシャル、成長タイプ、性格など（各スキルによる判定精度）

### 選手情報の取得と精度

#### 基本情報（自動取得）
- **名前**: 100%精度で取得
- **学校**: 100%精度で取得
- **学年**: 100%精度で取得
- **ポジション**: 100%精度で取得

#### 能力値情報（観察スキル依存）
- **現在の能力値**: 観察×0.7 + 分析×0.3 の精度で取得
- **ポジション適性**: 観察×0.6 + 洞察×0.4 の精度で取得

#### 成長情報（分析スキル依存）
- **成長スピード**: 分析×0.6 + 観察×0.4 の精度で取得
- **成長タイプ**: 分析×0.5 + 洞察×0.5 の精度で取得

#### 潜在情報（洞察スキル依存）
- **ポテンシャル**: 洞察×0.6 + 分析×0.4 の精度で取得
- **才能ランク**: 探索×0.5 + 洞察×0.5 の精度で取得
- **精神力**: 洞察×0.6 + コミュニケーション×0.4 の精度で取得
- **怪我リスク**: 洞察×0.7 + 観察×0.3 の精度で取得

#### 性格情報（コミュニケーションスキル依存）
- **性格**: コミュニケーション×0.7 + 洞察×0.3 の精度で取得
- **動機・目標**: コミュニケーション×0.8 + 洞察×0.2 の精度で取得

### 情報の信頼性
- **信頼度**: 0-100の値で情報の信頼性を表現
- **情報源**: どのアクションで取得した情報かを記録
- **更新日時**: 情報の鮮度を管理
- **精度レベル**: スキルによる判定精度に応じた信頼度

### 情報の更新と統合

#### 繰り返し視察による精度向上
- **同一選手の複数回視察**: 同じ選手を複数回視察することで精度が向上
- **同一学校の複数回視察**: 同じ学校を複数回視察することで精度が向上
- **視察回数による精度ボーナス**: 視察回数に応じた精度向上係数

#### 精度向上の計算式
```
基本精度 = (プライマリスキル値 × プライマリ係数 + サブスキル値 × サブ係数) × 8
視察回数ボーナス = min(視察回数 × 2, 20)  // 最大20%のボーナス
最終精度 = 基本精度 + 視察回数ボーナス + (直観スキル値 × 0.8)
最終精度 = min(最終精度, 80)  // 最大80%に制限
```



#### 時間経過による精度低下
- **情報の鮮度**: 最後の視察から経過した時間で精度が低下
- **成長タイミング**: 選手の成長後も一定期間は精度を維持
- **1年経過**: 1年（52週）経過すると精度が徐々に低下

#### 時間経過による精度低下の計算式
```
経過週数 = 現在週 - 最後の視察週
成長経過回数 = 経過週数 / 13  // 3ヶ月（13週）ごとに成長

if (経過週数 <= 52) {
  // 1年以内：精度維持
  時間補正 = 0
} else {
  // 1年経過後：徐々に精度低下
  時間補正 = min((経過週数 - 52) × 0.5, 20)  // 最大20%の低下
}

最終精度 = 基本精度 + 視察回数ボーナス + (直観スキル値 × 0.8) - 時間補正
最終精度 = min(最終精度, 80)  // 最大80%に制限
```

#### 時間経過による精度低下例
| 経過期間 | 精度低下 | 説明 |
|----------|----------|------|
| 3ヶ月以内 | 0% | 成長後も精度維持 |
| 6ヶ月以内 | 0% | 精度維持 |
| 1年以内 | 0% | 精度維持 |
| 1年3ヶ月 | 2% | 徐々に精度低下 |
| 1年6ヶ月 | 4% | 精度低下 |
| 2年 | 10% | 大幅な精度低下 |

#### 具体例：斎藤君の視察履歴

**初期設定**
- 斎藤君（1年生）
- スカウトの観察スキル: 6
- 分析スキル: 4
- 直観スキル: 3

**5月の視察（2回）**
```
1回目（5月第1週）:
基本精度 = (観察6 × 0.7 + 分析4 × 0.3) × 8 = (4.2 + 1.2) × 8 = 43.2%
視察回数ボーナス = 0%（1回目）
最終精度 = 43.2% + 0% + (直観3 × 0.8) = 43.2% + 2.4% = 45.6%
表示: 「守備: 70-90」

2回目（5月第3週）:
基本精度 = 43.2%
視察回数ボーナス = 4%（2回目）
最終精度 = 43.2% + 4% + 2.4% = 49.6%
表示: 「守備: 72-88」
```

**6月の視察（3回）**
```
3回目（6月第1週）:
基本精度 = 43.2%
視察回数ボーナス = 6%（3回目）
最終精度 = 43.2% + 6% + 2.4% = 51.6%
表示: 「守備: 74-86」

4回目（6月第3週）:
基本精度 = 43.2%
視察回数ボーナス = 8%（4回目）
最終精度 = 43.2% + 8% + 2.4% = 53.6%
表示: 「守備: 75-85」

5回目（6月第5週）:
基本精度 = 43.2%
視察回数ボーナス = 10%（5回目）
最終精度 = 43.2% + 10% + 2.4% = 55.6%
表示: 「守備: 76-84」
```

**半年後の視察（成長後）**
```
6回目（11月第1週）:
- 斎藤君は2回の成長を経て能力値が変化
- 経過週数: 26週（半年）
- 成長回数: 2回（3ヶ月ごと）

基本精度 = 43.2%
視察回数ボーナス = 12%（6回目）
時間補正 = 0%（1年以内なので）
最終精度 = 43.2% + 12% + 2.4% = 57.6%
表示: 「守備: 77-83」（成長後の能力値を高精度で把握）
```

**1年後の視察**
```
7回目（5月第1週）:
- 経過週数: 52週（1年）
- 時間補正 = 0%（ちょうど1年）

基本精度 = 43.2%
視察回数ボーナス = 14%（7回目）
最終精度 = 43.2% + 14% + 2.4% = 59.6%
表示: 「守備: 78-82」
```

**1年3ヶ月後の視察**
```
8回目（8月第1週）:
- 経過週数: 65週（1年3ヶ月）
- 時間補正 = (65 - 52) × 0.5 = 6.5%

基本精度 = 43.2%
視察回数ボーナス = 16%（8回目）
時間補正 = 6.5%
最終精度 = 43.2% + 16% + 2.4% - 6.5% = 55.1%
表示: 「守備: 76-84」（精度が少し低下）
```

## 7. レポートシステム

### レポートの種類
1. **簡易レポート**: 基本情報のみ
2. **詳細レポート**: 能力値分析を含む
3. **総合レポート**: 将来性予測を含む
4. **特別レポート**: 直観による特別な発見を含む

### レポートの評価
- **球団評価**: レポートの質に応じた評価
- **報酬**: 評価に応じた報酬
- **信頼度**: 評価に応じた信頼度の変化

## 8. 成長システム

### スキル成長
- **経験値獲得**: アクション実行時に獲得
- **レベルアップ**: 経験値蓄積でレベルアップ
- **スキルポイント**: レベルアップ時にスキルポイント獲得

### スカウトの成長タイプ
1. **バランス型**: 全スキルを平均的に成長
2. **専門型**: 特定スキルに特化
3. **直観型**: 直観スキルを重視
4. **体力型**: 体力スキルを重視

## 9. 実装観点

### データ構造

#### 基本クラス
- **Action**: アクション定義クラス
- **Scout**: スカウトクラス
- **PlayerInfo**: 選手情報クラス
- **Report**: レポートクラス

#### 視察履歴管理クラス
```dart
class ScoutingHistory {
  String scoutId;
  String targetId;  // 選手IDまたは学校ID
  String targetType;  // "player" または "school"
  
  // 視察履歴
  List<ScoutingRecord> records;
  
  // 統計情報
  int totalVisits;
  DateTime lastVisit;
  double currentAccuracy;
}

class ScoutingRecord {
  String actionId;
  DateTime visitDate;
  int weekNumber;
  double accuracy;
  Map<String, dynamic> obtainedInfo;
  bool wasSuccessful;
}
```

#### 精度計算クラス
```dart
class AccuracyCalculator {
  static double calculateAccuracy({
    required Map<Skill, int> scoutSkills,
    required String infoType,
    required int visitCount,
    required int weeksSinceLastVisit,
  }) {
    // 基本精度計算
    double baseAccuracy = _calculateBaseAccuracy(scoutSkills, infoType);
    
    // 視察回数ボーナス
    double visitBonus = min(visitCount * 2, 20);
    
    // 直観補正
    double intuitionBonus = scoutSkills[Skill.intuition] * 0.8;
    
    // 時間補正
    double timePenalty = _calculateTimePenalty(weeksSinceLastVisit);
    
    // 最終精度
    double finalAccuracy = baseAccuracy + visitBonus + intuitionBonus - timePenalty;
    
    return min(finalAccuracy, 80);  // 最大80%に制限
  }
  
  static double _calculateTimePenalty(int weeksSinceLastVisit) {
    if (weeksSinceLastVisit <= 52) {
      return 0;  // 1年以内は精度維持
    } else {
      return min((weeksSinceLastVisit - 52) * 0.5, 20);  // 最大20%の低下
    }
  }
}
```

### サービス層
- **ActionService**: アクション実行管理
- **ScoutService**: スカウト情報管理
- **ReportService**: レポート管理
- **SkillService**: スキル成長管理

### UI/UX設計
- **アクション選択画面**: 成功率、コスト、前提条件を表示
- **スカウト情報画面**: スキル値、統計情報を表示
- **レポート画面**: 収集した情報を整理して表示
- **結果画面**: アクション実行結果を表示

## 10. 今後の拡張可能性

### 短期拡張
- スカウトの個性システム
- チームスカウトシステム
- 地域別スカウトシステム

### 中期拡張
- スカウトの昇進システム
- 特別なアクション（秘密情報収集など）
- スカウト間の競争システム

### 長期拡張
- AIスカウトシステム
- 国際スカウトシステム
- スカウトの専門分野システム

## 11. バランス調整のポイント

### 成功判定の調整
- 各アクションの基礎成功率
- スキル補正係数
- 直観補正係数

### コストバランス
- AP消費量
- 金銭コスト
- 体力消費量

### 情報価値の調整
- 各アクションで取得できる情報の質
- 情報の信頼性
- 情報の鮮度

---

この設計ドキュメントを基に、段階的にスカウトシステムを実装していくことができます。まずは基本的なアクション実行システムから始めて、徐々に機能を追加していくことをお勧めします。 