# Scout Game ファイル構成

## 概要
スカウトゲームのファイル構成と各ファイルの役割を定義します。

## ディレクトリ構造

```
scout_game/
├── lib/
│   ├── models/                    # データモデル
│   │   ├── game/                  # ゲーム関連モデル
│   │   │   └── game.dart         # ゲーム状態管理
│   │   ├── player/                # 選手関連モデル
│   │   │   ├── player.dart       # 選手基本情報
│   │   │   ├── player_abilities.dart # 選手能力値
│   │   │   └── pitch.dart        # 投球関連
│   │   ├── school/                # 学校関連モデル
│   │   │   └── school.dart       # 学校情報
│   │   ├── news/                  # ニュース関連モデル
│   │   │   └── news_item.dart    # ニュースアイテム
│   │   └── scouting/              # スカウト関連モデル
│   │       └── action.dart        # スカウトアクション
│   ├── services/                  # サービス層
│   │   ├── game_manager.dart      # ゲーム管理（オーケストレーション）
│   │   ├── game_data_manager.dart # ゲームデータ永続化
│   │   ├── game_state_manager.dart # ゲーム状態管理

│   │   ├── data_service.dart      # データベース操作
│   │   ├── news_service.dart      # ニュース管理
│   │   └── scouting/              # スカウト関連サービス
│   │       ├── action_service.dart # スカウトアクション実行
│   │       └── scout_analysis_service.dart # スカウト分析
│   └── FILE_STRUCTURE.md          # このファイル
```

## 各ファイルの役割

### モデル層 (models/)

#### game/
- **game.dart**: ゲームの状態を管理するメインモデル
  - ゲーム進行（年、月、週）
  - スカウトの能力値
  - 予算、AP、評判
  - 発掘した選手リスト
  - 週次アクション

#### player/
- **player.dart**: 選手の基本情報と能力値管理
  - 選手の基本属性（名前、学校、学年、ポジション）
  - 技術・メンタル・フィジカル能力値
  - ポテンシャル、成長率、才能
- **player_abilities.dart**: 能力値の列挙型定義
- **pitch.dart**: 投球関連の情報

#### school/
- **school.dart**: 学校情報の管理
  - 学校名、所在地
  - 所属選手リスト
  - 監督の信頼度

#### news/
- **news_item.dart**: ニュースアイテムの定義
  - ニュースの種類、重要度
  - 関連する選手・学校

#### scouting/
- **action.dart**: スカウトアクションの定義
  - アクションタイプの列挙
  - アクションの基本情報

### サービス層 (services/)

#### ゲーム管理
- **game_manager.dart**: ゲーム全体のオーケストレーション
  - ゲームの開始・終了
  - 週送り処理の統合
  - 各サービスの呼び出し
  - ゲーム状態の更新

- **game_data_manager.dart**: ゲームデータの永続化
  - セーブ・ロード機能
  - ゲームデータのJSON変換

- **game_state_manager.dart**: ゲーム状態の変更処理
  - 選手の発掘・能力値更新
  - ランダムイベントの発生
  - 選手の成長処理

#### 選手関連

  - 選手の能力値生成
  - ポテンシャル生成
  - ポジション決定
  - 名前・性格生成

#### データ・ニュース
- **data_service.dart**: データベース操作
  - SQLite操作
  - 初期データ投入
  - 選手データのCRUD

- **news_service.dart**: ニュース管理
  - ニュースの追加・表示
  - ニュースの重要度管理

#### スカウト関連 (scouting/)
- **action_service.dart**: スカウトアクションの実行
  - 学校視察
  - 練習・試合観戦
  - インタビュー
  - ビデオ分析
  - アクション結果の処理

- **scout_analysis_service.dart**: スカウト分析データ
  - スカウト分析の保存・更新
  - 分析精度の管理

## 責任分離の原則

### GameManager
- **責任**: ゲーム全体のオーケストレーション
- **役割**: 各サービスの呼び出しと統合
- **含まない**: 具体的なビジネスロジック

### 各サービス
- **責任**: 特定のドメインの処理
- **役割**: 具体的なビジネスロジックの実装
- **特徴**: 単一責任の原則に従う

### モデル
- **責任**: データの表現と基本的な操作
- **役割**: ビジネスルールの表現
- **特徴**: 状態の不変性を保つ

## 設計原則

1. **単一責任の原則**: 各クラスは1つの責任のみを持つ
2. **依存性注入**: サービス間の依存関係を明確化
3. **不変性**: モデルオブジェクトの状態変更は新しいインスタンスで表現
4. **分離**: ビジネスロジックとデータアクセスを分離
5. **拡張性**: 新しい機能の追加が容易な構造

## 今後の拡張ポイント

- **AI/ML機能**: 選手評価アルゴリズムの追加
- **統計機能**: 選手・チーム統計の管理
- **通信機能**: オンライン機能の追加
- **UI/UX**: ユーザーインターフェースの改善 